import numpy as np
import re


initial = ('##..##....#.#.####........##.#.#####.##..#.#..#.#...##.#####.###.##...#....##....#..###.#...#.#.#.#')

rules = {
    '##.#.': '.',
    '##.##': '.',
    '#..##': '.',
    '#.#.#': '.',
    '..#..': '#',
    '#.##.': '.',
    '##...': '#',
    '.#..#': '.',
    '#.###': '.',
    '.....': '.',
    '...#.': '#',
    '#..#.': '#',
    '###..': '#',
    '.#...': '#',
    '###.#': '#',
    '####.': '.',
    '.##.#': '#',
    '#.#..': '#',
    '.###.': '#',
    '.#.##': '.',
    '#####': '#',
    '....#': '.',
    '.####': '.',
    '.##..': '#',
    '##..#': '.',
    '#...#': '.',
    '..###': '#',
    '...##': '.',
    '#....': '.',
    '..##.': '.',
    '.#.#.': '#',
    '..#.#': '#',
}

gencount = 0
offset = -5
x = '.....' + initial + '.....'

while gencount < 20:
    x2 = ['.'] * len(x)

    for ind in range(0, len(x)):
        x2[ind] = rules[''.join(x[ind-2:ind+3])]
    x = ''.join(x2)
    gencount += 1

tot = 0
for (ind, val) in enumerate(x):
    if val == '#':
        tot += ind - 100

print(tot)
